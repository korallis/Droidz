---
description: Generate project-specific validation workflow by detecting available tools
---

# /validate-init - Smart Validation Setup

Detects available tools in your project and generates a custom validation workflow.

## Detection Phase

Checking for available tools...

### Linters
!`command -v eslint >/dev/null 2>&1 && echo "✓ ESLint detected" || echo "⚠ ESLint not found"`

### Type Checkers  
!`command -v tsc >/dev/null 2>&1 && echo "✓ TypeScript detected" || echo "⚠ TypeScript not found"`

### Formatters
!`command -v prettier >/dev/null 2>&1 && echo "✓ Prettier detected" || true`
!`test -f .prettierrc -o -f .prettierrc.json -o -f prettier.config.js && echo "✓ Prettier config found" || true`

### Test Frameworks
!`command -v jest >/dev/null 2>&1 && echo "✓ Jest detected" || echo "⚠ Jest not found"`
!`command -v vitest >/dev/null 2>&1 && echo "✓ Vitest detected" || true`
!`command -v playwright >/dev/null 2>&1 && echo "✓ Playwright detected" || true`

---

## Generating Validation Workflow

Creating `.factory/commands/validate.md` based on detected tools...

!`cat > .factory/commands/validate.md << 'VALIDATE_EOF'
---
description: Run validation checks (auto-generated by /validate-init)
---

# Project Validation

VALIDATE_EOF
`

### Adding Phases Based on Detected Tools

!`if command -v eslint >/dev/null 2>&1; then
  cat >> .factory/commands/validate.md << 'EOF'
## Phase 1: Linting ✓
!\`npm run lint\`

EOF
  echo "✓ Added ESLint validation"
else
  echo "⚠ No linter detected - skipping Phase 1"
fi`

!`if command -v tsc >/dev/null 2>&1; then
  cat >> .factory/commands/validate.md << 'EOF'
## Phase 2: Type Checking ✓
!\`npx tsc --noEmit\`

EOF
  echo "✓ Added TypeScript validation"
else
  echo "⚠ No type checker detected - skipping Phase 2"
fi`

!`if command -v prettier >/dev/null 2>&1 || test -f .prettierrc -o -f .prettierrc.json; then
  cat >> .factory/commands/validate.md << 'EOF'
## Phase 3: Style Checking ✓
!\`npx prettier --check .\`

EOF
  echo "✓ Added Prettier validation (using npx)"
else
  echo "⚠ No formatter detected - skipping Phase 3"  
fi`

!`if command -v jest >/dev/null 2>&1 || command -v vitest >/dev/null 2>&1; then
  cat >> .factory/commands/validate.md << 'EOF'
## Phase 4: Unit Tests ✓
!\`npm test\`

EOF
  echo "✓ Added test validation"
else
  echo "⚠ No test framework detected - skipping Phase 4"
fi`

!`if command -v playwright >/dev/null 2>&1; then
  cat >> .factory/commands/validate.md << 'EOF'
## Phase 5: E2E Tests ✓
!\`npx playwright test\`

EOF
  echo "✓ Added E2E validation"  
else
  echo "⚠ No E2E framework detected - skipping Phase 5"
fi`

### Finalize

!`cat >> .factory/commands/validate.md << 'EOF'
---

✅ All validation phases complete!

**To customize:** Edit this file directly.
**Note:** Commands use \`npx\` to auto-install tools if needed.
EOF
`

✅ **Validation workflow created!**

Your custom `.factory/commands/validate.md` has been generated based on your project's tools.

**Usage:**
```
/validate
```

**To customize:** Edit `.factory/commands/validate.md` directly.

**Note:** All formatters and type checkers use `npx` to auto-install if needed.
