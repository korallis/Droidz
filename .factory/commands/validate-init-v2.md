---
description: Generate project-specific validation workflow by detecting available tools
---

# /validate-init - Smart Validation Setup

Detects available tools in your project and generates a custom validation workflow.

## Detection Phase

Checking for available tools...

### Linters
!`command -v eslint >/dev/null 2>&1 && echo "✓ ESLint detected" || echo "⚠ ESLint not found"`

### Type Checkers  
!`command -v tsc >/dev/null 2>&1 && echo "✓ TypeScript detected" || echo "⚠ TypeScript not found"`

### Formatters
!`command -v prettier >/dev/null 2>&1 && echo "✓ Prettier detected" || echo "⚠ Prettier not found"`

!`test -f .prettierrc && echo "✓ Prettier config (.prettierrc) found" || echo "⚠ No .prettierrc"`

!`test -f .prettierrc.json && echo "✓ Prettier config (.prettierrc.json) found" || echo "⚠ No .prettierrc.json"`

### Test Frameworks
!`command -v jest >/dev/null 2>&1 && echo "✓ Jest detected" || echo "⚠ Jest not found"`

!`command -v vitest >/dev/null 2>&1 && echo "✓ Vitest detected" || echo "⚠ Vitest not found"`

!`command -v playwright >/dev/null 2>&1 && echo "✓ Playwright detected" || echo "⚠ Playwright not found"`

---

## Generating Validation Workflow

Creating `.factory/commands/validate.md` based on detected tools...

!`cat > .factory/commands/validate.md << 'VALIDATE_EOF'
---
description: Run validation checks (auto-generated by /validate-init)
---

# Project Validation

VALIDATE_EOF
`

### Adding Phases Based on Detected Tools

!`command -v eslint >/dev/null 2>&1 && cat >> .factory/commands/validate.md << 'EOF' && echo "✓ Added ESLint validation"
## Phase 1: Linting ✓
!\`npm run lint\`

EOF
`

!`command -v tsc >/dev/null 2>&1 && cat >> .factory/commands/validate.md << 'EOF' && echo "✓ Added TypeScript validation"
## Phase 2: Type Checking ✓
!\`npx tsc --noEmit\`

EOF
`

!`test -f .prettierrc -o -f .prettierrc.json -o -f prettier.config.js && command -v prettier >/dev/null 2>&1; then
  PRETTIER_FOUND=$?
else
  PRETTIER_FOUND=1
fi
if [ $PRETTIER_FOUND -eq 0 ]; then
  cat >> .factory/commands/validate.md << 'EOF'
## Phase 3: Style Checking ✓
!\`npx prettier --check .\`

EOF
  echo "✓ Added Prettier validation (using npx)"
fi`

!`{ command -v jest >/dev/null 2>&1 || command -v vitest >/dev/null 2>&1; } && cat >> .factory/commands/validate.md << 'EOF' && echo "✓ Added test validation"
## Phase 4: Unit Tests ✓
!\`npm test\`

EOF
`

!`command -v playwright >/dev/null 2>&1 && cat >> .factory/commands/validate.md << 'EOF' && echo "✓ Added E2E validation"
## Phase 5: E2E Tests ✓
!\`npx playwright test\`

EOF
`

### Finalize

!`cat >> .factory/commands/validate.md << 'EOF'
---

✅ All validation phases complete!

**To customize:** Edit this file directly.
**Note:** Commands use \`npx\` to auto-install tools if needed.
EOF
`

✅ **Validation workflow created!**

Your custom `.factory/commands/validate.md` has been generated based on your project's tools.

**Usage:**
```
/validate
```

**To customize:** Edit `.factory/commands/validate.md` directly.

**Note:** All formatters and type checkers use `npx` to auto-install if needed.
